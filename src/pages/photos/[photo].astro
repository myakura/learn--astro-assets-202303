---
import Layout from '../../components/Layout.astro';

import photos from '../../data/photos.json';

export async function getStaticPaths() {
	return photos.map((item) => {
		return {
			params: {
				photo: item.url.slice(28), // stripping `https://unsplash.com/photos/`
			},
			props: {
				file: item.file,
				credit: item.credit,
				url: item.url,
			},
		};
	});
}

const { file, credit, url } = Astro.props;

const image = await import(`../../assets/${file}`);

const { src, width: origWidth, height: origHeight } = image;
const width = 800;
const height = Math.trunc((origHeight / origWidth) * width);

const title = `Photo by ${credit}`;
---

<Layout name={title}>
	<figure>
		<img src={src} width={width} height={height} alt="" />
	</figure>
</Layout>
